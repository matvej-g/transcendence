{
  "version": 3,
  "sources": ["../../src/input.ts", "../../src/game.ts", "../../src/main.ts"],
  "sourcesContent": ["export type Key = 'ArrowUp' | 'ArrowDown' | 'KeyW' | 'KeyS';\n\nconst down = new Set<Key>();\n\nexport function attachKeyboard(el: Window = window) {\n  const onKeyDown = (e: KeyboardEvent) => {\n    if (isMoveKey(e.code)) {\n      e.preventDefault(); // stop page scrolling with arrows/space on Firefox\n      down.add(e.code as Key);\n    }\n  };\n  const onKeyUp = (e: KeyboardEvent) => {\n    if (isMoveKey(e.code)) {\n      e.preventDefault();\n      down.delete(e.code as Key);\n    }\n  };\n  el.addEventListener('keydown', onKeyDown);\n  el.addEventListener('keyup', onKeyUp);\n  return () => {\n    el.removeEventListener('keydown', onKeyDown);\n    el.removeEventListener('keyup', onKeyUp);\n  };\n}\n\nexport function isDown(code: Key) {\n  return down.has(code);\n}\n\nfunction isMoveKey(code: string): code is Key {\n  return code === 'ArrowUp' || code === 'ArrowDown' || code === 'KeyW' || code === 'KeyS';\n}\n", "import { attachKeyboard, isDown } from './input';\n\nexport interface Game {\n  start(): void;\n  stop(): void;\n  running: boolean;\n}\n\ntype Ctx = CanvasRenderingContext2D;\n\nexport function createGame(canvas: HTMLCanvasElement): Game {\n  const ctx = canvas.getContext('2d') as Ctx;\n  const W = canvas.width;\n  const H = canvas.height;\n\n  // Rules baseline (apply same to every player later)\n  const PADDLE_SPEED = 360; // px/s \u2014 keep this identical for all players (IV.3)\n  const PADDLE_W = 14, PADDLE_H = 90;\n  const LEFT_X = 24;\n\n  let last = 0;\n  let raf = 0;\n  let running = false;\n  const cleanupKeys = attachKeyboard();\n\n  const paddle = { x: LEFT_X, y: (H - PADDLE_H) / 2, w: PADDLE_W, h: PADDLE_H };\n\n  function loop(t: number) {\n    raf = requestAnimationFrame(loop);\n    const dt = last ? (t - last) / 1000 : 0;\n    last = t;\n\n    update(dt);\n    draw();\n  }\n\n  function update(dt: number) {\n    let vy = 0;\n    // Two equivalent control schemes for the single paddle:\n    if (isDown('ArrowUp') || isDown('KeyW')) vy = -PADDLE_SPEED;\n    if (isDown('ArrowDown') || isDown('KeyS')) vy = +PADDLE_SPEED;\n\n    paddle.y += vy * dt;\n    // clamp to field\n    if (paddle.y < 0) paddle.y = 0;\n    if (paddle.y + paddle.h > H) paddle.y = H - paddle.h;\n  }\n\n  function drawNet(ctx: Ctx) {\n    const seg = 16, gap = 12, x = W / 2 - 2, w = 4;\n    ctx.fillStyle = '#bbbbbb';\n    for (let y = 0; y < H; y += seg + gap) ctx.fillRect(x, y, w, seg);\n  }\n\n  function draw() {\n    // clear\n    ctx.fillStyle = '#121216';\n    ctx.fillRect(0, 0, W, H);\n\n    drawNet(ctx);\n\n    // paddle\n    ctx.fillStyle = '#e8e8e8';\n    ctx.fillRect(paddle.x, paddle.y, paddle.w, paddle.h);\n\n    // ball placeholder\n    ctx.beginPath();\n    ctx.arc(W * 0.65, H * 0.45, 8, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  return {\n    start() {\n      if (running) return;\n      running = true;\n      last = 0;\n      raf = requestAnimationFrame(loop);\n    },\n    stop() {\n      running = false;\n      cancelAnimationFrame(raf);\n      cleanupKeys();\n    },\n    get running() { return running; }\n  };\n}\n", "import { createGame } from './game';\n\nconst canvas = document.getElementById('game') as HTMLCanvasElement;\nconst playBtn = document.getElementById('playBtn') as HTMLButtonElement;\n\nconst game = createGame(canvas);\n\nplayBtn.addEventListener('click', () => {\n  if (!game.running) {\n    game.start();\n    playBtn.disabled = true;\n    playBtn.textContent = 'Playing\u2026';\n  }\n});\n"],
  "mappings": "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",
  "names": ["canvas", "ctx"]
}
