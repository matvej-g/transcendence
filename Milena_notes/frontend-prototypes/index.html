<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <title>ft_transcendence</title>
    <!-- Tailwind CDN (dev convenience) -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="min-h-screen bg-gradient-to-br from-gray-900 to-black flex flex-col justify-between">

    <!-- AUTH NAVBAR (shown by default) -->
    <nav id="auth-navbar" class="header flex flex-wrap justify-between items-center text-white px-5 py-0.25 shadow-lg bg-gradient-to-br from-[#2c3e50] to-[#3498db]">
        <h1 class="text-xl text-emerald-400 py-2">ft_transcendence</h1>
        <ul class="nav-bar-right flex gap-12 items-center">
            <li>
                <button class="hover:text-emerald-400 transition-colors" data-lang-switcher></button>
            </li>
        </ul>
    </nav>

    <!-- HEADER / NAVBAR (hidden by default, shown after login) -->
    <nav id="navbar" class="hidden header flex flex-wrap justify-between items-center text-white px-5 py-0.25 shadow-lg bg-gradient-to-br from-[#2c3e50] to-[#3498db]">
        <ul class="nav-bar-left flex gap-12">
            <li class="nav-item"><a href="#profile" class="hover:text-emerald-400 transition-colors">Profile</a></li>
            <li class="nav-item"><a href="#game" class="hover:text-emerald-400 transition-colors">Game</a></li>
            <li class="nav-item"><a href="#friends" class="hover:text-emerald-400 transition-colors">Friends</a></li>
            <li class="nav-item"><a href="#chat" class="hover:text-emerald-400 transition-colors">Chat</a></li>
        </ul>
        <h1 class="text-xl text-emerald-400">ft_transcendence</h1>
        <ul class="nav-bar-right flex gap-12 items-center">
            <li>
                <button class="hover:text-emerald-400 transition-colors" data-lang-switcher></button>
            </li>
            <li class="relative group">
                <button class="hover:text-emerald-400 transition-colors">Settings</button>
                <div class="absolute left-0 mt-0 w-48 bg-gray-800 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50">
                    <a href="#settings/edit-username" class="block px-4 py-2 text-white hover:bg-emerald-400 hover:text-black rounded-t-lg transition-colors">Edit Username</a>
                    <a href="#settings/change-password" class="block px-4 py-2 text-white hover:bg-emerald-400 hover:text-black transition-colors">Change Password</a>
                    <a href="#settings/change-avatar" class="block px-4 py-2 text-white hover:bg-emerald-400 hover:text-black transition-colors">Change Avatar</a>
                    <a href="#settings/2fa" class="block px-4 py-2 text-white hover:bg-emerald-400 hover:text-black rounded-b-lg transition-colors">2-Factor Auth</a>
                </div>
            </li>
            <button id="logoutBtn" class="bg-gradient-to-r from-green-400 to-green-500 hover:bg-gradient-to-r hover:from-green-500 hover:to-green-400 border-none rounded-3xl px-4 py-1.5 my-1 text-white font-bold cursor-pointer transition-all duration-300 shadow-md hover:-translate-y-1 hover:shadow-lg">
                Logout
            </button>
        </ul>
    </nav>

    <!-- MAIN CONTENT AREA -->
    <div id="content" class="flex-1 flex flex-col justify-start items-center max-w-[1960px] mx-auto w-full">

      <!-- LOGIN/REGISTER SECTION (shown by default) -->
      <section id="auth-section" class="w-full h-full flex flex-col items-center justify-center">
        <div class="auth-container w-[320px] bg-gradient-to-br from-[#2c3e50] to-[#3498db] border border-emerald-400 rounded-xl shadow-lg p-6 m-16 space-y-4 text-white">
          <h1 class="text-xl font-semibold text-emerald-400 text-center" data-i18n="authDom.title">Login</h1>

          <label for="user" class="block text-xs text-emerald-200" data-i18n="authDom.username">Username</label>
          <input id="user" autocomplete="username" class="w-full px-3 py-2 border border-emerald-400 rounded-md bg-gray-900 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-400" />

          <label for="pass" class="block text-xs text-emerald-200" data-i18n="authDom.password">Password</label>
          <input id="pass" type="password" autocomplete="current-password" class="w-full px-3 py-2 border border-emerald-400 rounded-md bg-gray-900 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-400" />

          <button id="loginBtn" class="w-full mt-2 px-3 py-2 rounded-md border border-emerald-400 bg-emerald-400 text-black font-semibold hover:bg-emerald-300 hover:border-emerald-300 active:bg-emerald-500 transition-all" data-i18n="authDom.loginBtn">Login</button>

          <button id="registerBtn" class="w-full mt-1 px-3 py-2 rounded-md border border-emerald-400 text-emerald-400 hover:bg-emerald-400 hover:text-black transition-all" data-i18n="authDom.registerBtn">Register</button>

          <!-- New: pretendLogin: delete later-->
          <button id="pretendLoginBtn" class="w-full mt-1 px-3 py-2 rounded-md border border-green-400 bg-green-400 text-black font-semibold hover:bg-green-300 hover:border-green-300 active:bg-green-500 transition-all" data-i18n="authDom.pretendLoginBtn">pretendLogin â†’ landing</button>
        </div>
      </section>

      <!-- PROFILE SECTION (hidden by default) -->
      <section id="profile-section" class="hidden w-full">
        <div class="profile flex justify-around items-center w-full bg-gradient-to-r from-[#40e5c9] to-[#2ecc71] p-4 shadow-lg flex-wrap">
            <div class="avatar-name flex flex-col items-center">
                <img src="profile_avatar.jpg" alt="Avatar image" class="h-40 w-auto rounded-full border-2 border-white/20 shadow-lg m-4">
                <h2 class="text-white font-bold text-lg">nickname</h2>
            </div>

            <div class="stats flex flex-col justify-between items-center">
                <h3 class="text-black font-bold text-lg">Statistics</h3>
                <div class="text-rectangle flex justify-between gap-12 text-black shadow-xl rounded-3xl p-4 backdrop-blur-sm font-[Brush_Script_MT]">
                    <ul class="match-stats pl-5">
                        <h4 class="font-bold">Matches</h4>
                        <li>Wins: 4</li>
                        <li>Losses: 6</li>
                        <li>Winning rate: 40%</li>
                    </ul>
                    <ul class="tournament-stats">
                        <h4 class="font-bold">Tournaments</h4>
                        <li>Wins: 4</li>
                        <li>Losses: 6</li>
                        <li>Winning rate: 40%</li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="match-history w-1/2 flex flex-col justify-start items-center text-emerald-400 p-4 m-4 font-[Brush_Script_MT]">
            <h3 class="mb-4 font-bold">Match History</h3>
            <ul class="text-rectangle flex flex-col items-start w-full">
                <li class="match-item w-full flex justify-between py-1">
                    <div class="date-time text-emerald-400">Date/Time</div>
                    <div class="match-middle flex gap-4 w-[70%] mx-5">
                        <div class="nickname truncate">nickname</div>
                        <div>:</div>
                        <div class="nickname truncate">otherplayer</div>
                    </div>
                    <div class="text-emerald-400">3:5</div>
                </li>
            </ul>
        </div>
      </section>

      <!-- GAME SECTION (hidden by default) -->
      <section id="game-section" class="hidden w-full h-full flex items-center justify-center text-white text-2xl">
        <div class="text-center">
          <h2 class="mb-4">Game Section</h2>
          <p>Game content goes here</p>
        </div>
      </section>

      <!-- FRIENDS SECTION (hidden by default) -->
      <section id="friends-section" class="hidden w-full h-full flex items-center justify-center text-white text-2xl">
        <div class="text-center">
          <h2 class="mb-4">Friends Section</h2>
          <p>Friends list goes here</p>
        </div>
      </section>

      <!-- CHAT SECTION (hidden by default) -->
      <section id="chat-section" class="hidden w-full h-full flex items-center justify-center text-white text-2xl">
        <div class="text-center">
          <h2 class="mb-4">Chat Section</h2>
          <p>Chat content goes here</p>
        </div>
      </section>

    </div>

    <!-- FOOTER (shown by default) -->
    <footer id="footer" class="flex justify-around px-2.5 py-1 bg-gradient-to-r from-[#2c3e50] to-[#3498db] shadow-inner text-white">
      A project made by dhuss, merdal, isemin, maustel, mgering
    </footer>

    <!-- i18n / language init for this page -->
    <script type="module" src="/dist/components/languages/auth/init.js"></script>

    <!-- button logic -->
    <script type="module" src="/dist/components/auth/loginButton.js"></script>
    <script type="module" src="/dist/components/auth/registerButton.js"></script>
    <script type="module" src="/dist/components/auth/pretendLoginButton.js"></script> <!-- Delete later -->

    <!-- SPA Router Script -->
    <script type="module">
      // Simple router to handle navigation between sections
      const sections = {
        'auth': document.getElementById('auth-section'),
        'profile': document.getElementById('profile-section'),
        'game': document.getElementById('game-section'),
        'friends': document.getElementById('friends-section'),
        'chat': document.getElementById('chat-section'),
      };

      const authNavbar = document.getElementById('auth-navbar');
      const navbar = document.getElementById('navbar');
      const footer = document.getElementById('footer');

      function showSection(sectionId) {
        // Hide all sections
        Object.values(sections).forEach(section => section.classList.add('hidden'));

        // Show selected section
        if (sections[sectionId]) {
          sections[sectionId].classList.remove('hidden');
        }

        // Show/hide navbars and footer based on section
        if (sectionId === 'auth') {
          authNavbar.classList.remove('hidden');
          navbar.classList.add('hidden');
          footer.classList.add('hidden');
        } else {
          authNavbar.classList.add('hidden');
          navbar.classList.remove('hidden');
          footer.classList.remove('hidden');
        }
      }

      // Handle hash navigation
      window.addEventListener('hashchange', () => {
        const hash = window.location.hash.slice(1);
        const section = hash.split('/')[0] || 'auth';
        showSection(section);
      });

      // Logout button
      document.getElementById('logoutBtn')?.addEventListener('click', () => {
        window.location.hash = '#';
      });

      // Initial load
      const initialHash = window.location.hash.slice(1);
      const initialSection = initialHash.split('/')[0] || 'auth';
      showSection(initialSection);
    </script>
  </body>
</html>
